<!doctype html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script>
        // if you would like to override console.log to print log to HTML only
        // console.log = function (id, message) {
        //     document.getElementById(id).innerHTML = message;
        // };

        // load Branch
        (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent disableTracking qrCode".split(" "), 0);
        // init Branch
        branch.init('key_live_nfYHxRXqnf7etkBfa45sTkmjFyh6OSM9', function (err, data) {
            console.log(`error? ${err} data:`, data);
            document.getElementById('before').innerHTML = 'has app: ' + data.has_app;
        });

        var linkData = {
            campaign: 'content 123',
            channel: 'facebook',
            feature: 'dashboard',
            stage: 'new user',
            tags: ['tag1', 'tag2', 'tag3'],
            alias: '',
            data: {
                'custom_bool': true,
                'custom_int': Date.now(),
                'custom_string': 'hello',
                '$og_title': 'Title',
                '$og_description': 'Description',
                '$og_image_url': 'http://lorempixel.com/400/400'
            }
        };

        branch.link(linkData, function (err, link) {
            console.log(`error? ${err} link: ${link}`);
            document.getElementById('button').onclick = function() {
                window.open(link || err)
            };
            document.getElementById('anchor').innerHTML = link || err;
            document.getElementById('anchor').href = link || err;
        });

        branch.data(function(err, data) {
            console.log(`error? ${err} data:`, data);
            document.getElementById('after').innerHTML = 'has app: ' + data.has_app;
        })


    </script>
</head>

<body>
    <div id="before"></div>
    <button id="button">Deep Link</button>
    <a id="anchor" href="#">Deep Link should go here...</a>
    <div id="after"></div>
</body>

</html>
